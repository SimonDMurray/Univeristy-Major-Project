
```{r}
# Need to load sceasy package for conversion
library(sceasy)
```

```{r}
# Set work dir so all work is relative for reproducibility
wd <- setwd(".")
```

```{r}
# Reading in RNA object written to file by analysis notebook
RNA_seurat <- readRDS(paste(wd, "seurat_objects/RNA/seurat.rds", sep="/"))
```

```{r}
# Reading in ADT object written to file by analysis notebook
ADT_seurat <- readRDS(paste(wd, "seurat_objects/ADT/seurat.rds", sep="/"))
```

```{r}
# Create output directory for leiden h5ad files
dir.create(file.path(wd, "anndata_files", "leiden", "RNA"), recursive = TRUE)
dir.create(file.path(wd, "anndata_files", "leiden", "ADT"), recursive = TRUE)
```

```{r}
# Converting RNA seurat to h5ad
convertFormat(RNA_seurat, from = "seurat", to = "anndata", outFile = "anndata_files/leiden/RNA/rna.h5ad")
```

```{r}
# Converting ADT seurat to h5ad
convertFormat(ADT_seurat, from = "seurat", to = "anndata", outFile = "anndata_files/leiden/ADT/adt.h5ad")
```